FROM openjdk:11.0.1-jre
MAINTAINER Jay Jay Billings (billingsjj@ornl.gov)

# Specify Fuseki variables
ARG FUSEKI_VERSION=3.12.0
ARG FUSEKI_NAME=apache-jena-fuseki
ARG FUSEKI_DOWNLOAD_FILE=$FUSEKI_NAME-$FUSEKI_VERSION.tar.gz

# Install Fuseki
RUN wget https://www-us.apache.org/dist/jena/binaries/$FUSEKI_DOWNLOAD_FILE && \
    tar -xzvf $FUSEKI_DOWNLOAD_FILE && \
    mv $FUSEKI_NAME-$FUSEKI_VERSION /opt/$FUSEKI_NAME && \
    mkdir -p /opt/$FUSEKI_NAME/run/configuration

# Add dataset turtle to fuseki config
ADD dataset.ttl $FUSEKI_NAME/run/configuration/dataset.ttl

# Expose the Fuseki port
EXPOSE 3030

# Execute Fuseki from the installation directory
WORKDIR /opt/apache-jena-fuseki
ENTRYPOINT ["./fuseki-server"]
